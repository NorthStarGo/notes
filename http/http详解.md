### **http的定义和历史**

  HTTP是一个属于应用层的面向对象的协议，由于其简捷、快速的方式，适用于分布式超媒体信息系统。它于1990年提出，经过几年的使用与发展，得到不断地完善和扩展。目前已经经历了四个版本，分别是http0.9，http1.0,http1.1及去年刚发布的http2.0。

### **http三次握手**
   
   HTTP是基于传输层的TCP协议，而TCP是一个端到端的面向连接的协议。所谓的端到端可以理解为进程到进程之间的通信.

![](http://images.cnblogs.com/cnblogs_com/CareySon/201204/201204271057008113.png)

### **http的主要特点**

1.支持客户/服务器模式
2.简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。
3.灵活：http允许传轮任意类型的数据对象。正在传输的类型由Content-Type加以标记。
4.无连接：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。

### **http请求详解**

http请求由三部分组成，分别是：请求行、消息报头、请求正文

http的请求方法：GET POST HEAD PUT DELETE TRACE CONNECT OPTIONS 

GET     请求获取Request-URI所标识的资源

POST    在Request-URI所标识的资源后附加新的数据

HEAD    请求获取由Request-URI所标识的资源的响应消息报头

PUT     请求服务器存储一个资源，并用Request-URI作为其标识

DELETE  请求服务器删除Request-URI所标识的资源

TRACE   请求服务器回送收到的请求信息，主要用于测试或诊断

CONNECT 保留将来使用

OPTIONS 请求查询服务器的性能，或者查询与资源相关的选项和需求

HTTP请求由三部分组成：请求行  http头  内容

请求行内容如下：`GET www.cnblogs.com HTTP/1.1`请求行写法是固定的，由三部分组成，第一部分是请求方法，第二部分是请求网址，第三部分是HTTP版本。｀

第二部分HTTP头在HTTP请求可以是3种HTTP头：1.请求头(request header)  2.普通头(general header)  3.实体头(entity header) 通常来说，由于Get请求往往不包含内容实体，因此也不会有实体头。

第三部分内容只在POST请求中存在，因为GET请求并不包含任何实体。

完整的http请求图如下：

![](http://images.cnblogs.com/cnblogs_com/CareySon/201204/201204271057105124.png)

请求报头允许客户端向服务器端传递请求的附加信息以及客户端自身的信息。

Accept请求报头域用于指定客户端接受哪些类型的信息。eg：Accept：image/gif，表明客户端希望接受GIF图象格式的资源；Accept:text/html,表明客户希望接受html文本。

Accept-Charset请求报头域用于指定客户端接受的字符集。eg：Accept-Charset:iso-8859-1,gb2312.如果在请求消息中没有设置这个域，缺省是任何字符集都可以接受。

Accept-Encoding请求报头域类似于Accept，但是它是用于指定可接受的内容编码。eg：Accept-Encoding:gzip.deflate.如果请求消息中没有设置这个域服务器假定客户端对各种内容编码都可以接受。

Accept-Language请求报头域类似于Accept，但是它是用于指定一种自然语言。eg：Accept-Language:zh-cn.如果请求消息中没有设置这个报头域，服务器假定客户端对各种语言都可以接受。

Authorization请求报头域主要用于证明客户端有权查看某个资源。当浏览器访问一个页面时，如果收到服务器的响应代码为401（未授权），可以发送一个包含Authorization请求报头域的请求，要求服务器对其进行验证。

Host请求报头域主要用于指定被请求资源的Internet主机和端口号，它通常从HTTP URL中提取出来的，eg：
我们在浏览器中输入：http://www.guet.edu.cn/index.html
浏览器发送的请求消息中，就会包含Host请求报头域，如下：
Host：www.guet.edu.cn
此处使用缺省端口号80，若指定了端口号，则变成：Host：www.guet.edu.cn:指定端口号

User-Agent
我们上网登陆论坛的时候，往往会看到一些欢迎信息，其中列出了你的操作系统的名称和版本，你所使用的浏览器的名称和版本，这往往让很多人感到很神奇，实际上，服务器应用程序就是从User-Agent这个请求报头域中获取到这些信息。User-Agent请求报头域允许客户端将它的操作系统、浏览器和其它属性告诉服务器。不过，这个报头域不是必需的，如果我们自己编写一个浏览器，不使用User-Agent请求报头域，那么服务器端就无法得知我们的信息了。

### **http响应详解**

当Web服务器收到HTTP请求后，会根据请求的信息做某些处理(这些处理可能仅仅是静态的返回页，或是包含Asp.net,PHP,Jsp等语言进行处理后返回)，相应的返回一个HTTP响应。HTTP响应在结构上很类似于HTTP请求,也是由三部分组成，分别为:状态行  HTTP头  返回内容

状态行内容如：`HTTP/1.1 200 OK`

第一部分是HTTP版本，第二部分是响应状态码，第三部分是状态码的描述，因此也可以把第二和第三部分看成一个部分。

http状态码分别有：

信息类 (100-199)

响应成功 (200-299)：
  
  200:表示成功
  
  204:表示服务器接􏰖的请求已成功􏰗理,但在返回的响应报文 中不含实体的主体部分
  
  206:客户端进行了􏰥围请求,而服务器成功􏰱行了这部分的GET请求

重定向类 (300-399)

  301:􏱔􏱕􏱖永久性重定向。该状态码表示请求的资源已被分配了新的 URI,以 后应使用资源现在所指的 URI。也就是说,如果已经􏱗资源对应的 URI 保存为书􏱆了,这时应该􏱘 Location 首部字段提示的 URI 重新保存。

  302:􏱲临时􏱖重定向。该状态码表示请求的资源已被分配了新的 URI,希 望用户(本􏱳)能使用新的 URI 􏱴问。和 301 Moved Permanently 状态码相􏱶,但 302 状态码代表的资源 不是被􏱔􏱕􏱷动,只是􏱲时􏱖􏱸的。􏱹􏱺􏱻说,已􏱷动的资源对应的 URI 将来还有可能发生改变。􏰚如,用户􏱗 URI 保存成书􏱆,但不会􏱙 301 状态码出现时那样􏱼更新书􏱆,而是仍􏱽保留返回 302 状态码的页 面对应的 URI。
  
  303:该状态码表示由于请求对应的资源存在着另一个 URI,应使用 GET 方法定向􏲅􏲆请求的资源。
  
  304:该状态码表示客户端发送􏲡􏲢􏲣件的请求 A 时,服务器端􏰘许请求 􏱴问资源,但未满足􏲣件的􏰞􏰟。304 状态码返回时,不包含􏰙何响应 的主体部分。304 􏲈然被􏲪分在 3􏰶􏰶 􏲫别中,但是和重定向􏲬没有关系。
  

客户端错误类 (400-499)

  400:该状态码表示请求报文中存在􏳁法􏲸􏲹。当􏲸􏲹发生时,需修改请求 的内容后再􏱳发送请求。另外,浏览器会􏱙 200 OK 一样对待该状态码。
  
  401:该状态码表示发送的请求需要有通过 HTTP 认证(BASIC 认证、 DIGEST 认证)的认证信􏰝。
  
  403:该状态码表明对请求资源的􏱴问被服务器􏳖绝了。未􏲅得文件􏲭􏳙的􏱴问授权,􏱴问权􏳚出现某些问题(从未授权的 发送源 IP 地􏳛􏳜图􏱴问)等􏳝举的􏰞􏰟都可能是发生 403 的原因。
  
  404:该状态码表明服务器上无法􏳧到请求的资源。􏳨此之外,也可以在 服务器端􏳖绝请求且不想说明理由时使用。

服务端错误类 (500-599)

  500:该状态码表明服务器端在􏰱行请求时发生了􏲸􏲹。也有可能是 Web 应用存在的 bug 或某些􏱲时的􏳱􏳲。
  
  503:该状态码表明服务器􏳺时􏰗于􏳻􏳼􏳽或正在进行停机维􏳾,现在无法􏰗理请求。

第三部分http响应内容就是第三部分HTTP响应内容就是HTTP请求所请求的信息。这个信息可以是一个HTML，也可以是一个图片。

 Location: 服务器通过这个头，来告诉浏览器跳到哪里

 Server：服务器通过这个头，告诉浏览器服务器的型号
 
 Refresh：服务器通过这个头，告诉浏览器定时刷新
 
 Content-Disposition: 服务器通过这个头，告诉浏览器以下载方式打数据
 
 Transfer-Encoding：服务器通过这个头，告诉浏览器数据是以分块方式回送的
 
 Expires: -1  控制浏览器不要缓存
 
 Cache-Control: no-cache  
 
 Content-Encoding实体报头域被用作媒体类型的修饰符，它的值指示了已经被应用到实体正文的附加内容的编码，因而要获得Content-Type报头域中所引用的媒体类型，必须采用相应的解码机制。Content-Encoding这样用于记录文档的压缩方法，eg：Content-Encoding：gzip
 
 Content-Language实体报头域描述了资源所用的自然语言。没有设置该域则认为实体内容将提供给所有的语言阅读
者。eg：Content-Language:da

Content-Length实体报头域用于指明实体正文的长度，以字节方式存储的十进制数字来表示。

Content-Type实体报头域用语指明发送给接收者的实体正文的媒体类型。eg：
Content-Type:text/html;charset=ISO-8859-1
Content-Type:text/html;charset=GB2312

Last-Modified实体报头域用于指示资源的最后修改日期和时间。

Expires实体报头域给出响应过期的日期和时间。为了让代理服务器或浏览器在一段时间以后更新缓存中(再次访问曾访问过的页面时，直接从缓存中加载，缩短响应时间和降低服务器负载)的页面，我们可以使用Expires实体报头域指定页面过期的时间。eg：Expires：Thu，15 Sep 2006 16:23:12 GMT
HTTP1.1的客户端和缓存必须将其他非法的日期格式（包括0）看作已经过期。eg：为了让浏览器不要缓存页面，我们也可以利用Expires实体报头域，设置为0，jsp中程序如下：response.setDateHeader("Expires","0");

参照资料：

[HTTP协议漫淡](http://www.cnblogs.com/CareySon/archive/2012/04/27/HTTP-Protocol.html)

[http协议详解](http://www.cnblogs.com/li0803/archive/2008/11/03/1324746.html)

《图解http》