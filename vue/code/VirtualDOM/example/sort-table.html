<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>虚拟DOM</title>
    <style>
        thead {
            color: green
        }

        tbody {
            color: blue
        }

        table,
        th,
        td {
            border: 1px solid black
        }
    </style>
</head>

<body>
    <script src="../dist/bundle.js"></script>
    <script>
        var el = vd.el
        var diff = vd.diff
        var patch = vd.patch

        var AGE = 'age'
        var REPUTATION = 'reputation'

        var sortKey = AGE
        var sortType = 1

        var list = [{
                username: 'Jerry',
                age: 12,
                reputation: 200,
                uid: 'user1'
            },
            {
                username: 'Pony',
                age: 33,
                reputation: 3000,
                uid: 'user4'
            },
            {
                username: 'Lucy',
                age: 21,
                reputation: 99,
                uid: 'user2'
            },
            {
                username: 'Tomy',
                age: 20,
                reputation: 20,
                uid: 'user3'
            },
            {
                username: 'Funky',
                age: 49,
                reputation: 521,
                uid: 'user5'
            }
        ]

        function renderTree() {
            var rows = renderRows()
            return el('div', [el('b', ['sortKey: ' + sortKey, ' | sortType：' + (sortType ? 'up' : 'down')]), el('table',
                [
                    el('thead', [
                        el('tr', [
                            el('th', ['UID']),
                            el('th', ['NAME']),
                            el('th', {
                                'id': 'sort-head1',
                                sortKey: 'age'
                            }, ['AGE']),
                            el('th', {
                                'id': 'sort-head2',
                                sortKey: 'reputation'
                            }, ['REPUTATION'])
                        ])
                    ]),
                    el('tbody', rows)
                ])])
        }

        function renderRows() {
            var rows = []
            for (var i = 0, len = list.length; i < len; i++) {
                var item = list[i]
                rows.push(
                    el('tr', {
                        key: item.uid
                    }, [
                        el('td', [item.uid]),
                        el('td', [item.username]),
                        el('td', [item.age]),
                        el('td', [item.reputation])
                    ])
                )
            }
            return rows
        }

        var tree = renderTree()
        var dom = tree.render()
        document.body.appendChild(dom)

        function sortData() {

        }
    </script>
</body>

</html>